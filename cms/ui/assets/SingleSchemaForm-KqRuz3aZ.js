import{d as w,m as b,g as h,w as m,u as v,o as l,a as s,c as u,b as d,v as f,x as _,l as I,p as C,f as k,_ as A}from"./index-Ch-kkg_L.js";import{a as p}from"./api-DZsGxFFw.js";import{S as P}from"./SchemaForm-qvVvv0o_.js";import{B}from"./Button-CC7H-t5C.js";const y=o=>(C("data-v-4a4ac86a"),o=o(),k(),o),L={key:0},V={key:1},x=y(()=>s("a",{href:"https://www.w3schools.com/tags/ref_urlencode.ASP",target:"_blank"},"URL encoded",-1)),D=["disabled"],T=y(()=>s("p",null,"The display name of the single. Case-insensitive.",-1)),U=w({__name:"SingleSchemaForm",props:{schema:{}},setup(o){const r=v(),n=o,e=b(n.schema??{name:"",display_name:""}),S=async a=>{if(e.name=encodeURIComponent(e.name.toLocaleLowerCase()),e.display_name=e.display_name.toLocaleLowerCase(),!e.name||!e.display_name){alert("Single schema must have an API identifier and a display name set");return}if(e.name==="create"){alert("Single schema API identifier cannot be 'create'");return}const t={...e,properties:a};if(n.schema)await p.updateSingleSchema(t.name,t),location.reload();else{const i=await p.addSingleSchema(t);await r.push(r.resolve({name:"single-schemas"}).href+"/"+i.created_schema_name),location.reload()}},g=async()=>{!n.schema||!confirm("Are you sure you want to delete this single schema? It will also remove all database entries associated with it!")||(await p.deleteSingleSchema(n.schema.name),await r.push({name:"single-schemas"}),location.reload())};return(a,t)=>{var i;return l(),h(P,{mode:a.schema?"update":"create",properties:(i=a.schema)==null?void 0:i.properties,"on-submit":S},{attributes:m(()=>[s("label",null,[a.schema?(l(),u("p",L," The unique API identifier for this single. ")):(l(),u("p",V,[d(" Specify a unique API identifier for this single. Cannot be changed once set. Case-insensitive. Will be "),x,d(". ")])),f(s("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>e.name=c),type:"text",placeholder:"API identifier...",disabled:!!a.schema},null,8,D),[[_,e.name]])]),s("label",null,[T,f(s("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>e.display_name=c),type:"text",placeholder:"Display name..."},null,512),[[_,e.display_name]])])]),actions:m(()=>[a.schema?(l(),h(B,{key:0,type:"button",mode:"ghost","aria-label":"Delete",onClickPassive:g},{default:m(()=>[d(" Delete ")]),_:1})):I("",!0)]),_:1},8,["mode","properties"])}}}),E=A(U,[["__scopeId","data-v-4a4ac86a"]]);export{E as S};
