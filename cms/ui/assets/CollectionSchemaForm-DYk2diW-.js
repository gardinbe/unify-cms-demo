import{d as w,m as I,g as h,w as _,u as g,o as p,a,c as f,b as s,v as m,x as d,l as v,p as S,f as P,_ as A}from"./index-COE1sEld.js";import{B as k}from"./Button-e0VMjl-o.js";import{S as x}from"./SchemaForm-C9uSmCZg.js";import{a as y}from"./api-CkCrquHF.js";const c=i=>(S("data-v-1d483f04"),i=i(),P(),i),L={key:0},U={key:1},V=c(()=>a("a",{href:"https://www.w3schools.com/tags/ref_urlencode.ASP",target:"_blank"},"URL encoded",-1)),B=["disabled"],T=c(()=>a("p",null,[s("The "),a("b",null,"plural"),s(" display name of the collection. Case-insensitive.")],-1)),R=c(()=>a("p",null,[s("The "),a("b",null,"singular"),s(" display name of a collection item. Case-insensitive.")],-1)),D=c(()=>a("p",null,"The API identifier of the property to use as the display name for each collection item.",-1)),F=w({__name:"CollectionSchemaForm",props:{schema:{}},setup(i){const u=g(),n=i,e=I(n.schema??{name:"",singular_display_name:"",plural_display_name:"",item_display_property:""}),b=async l=>{if(e.name=encodeURIComponent(e.name.toLocaleLowerCase()),e.plural_display_name=e.plural_display_name.toLocaleLowerCase(),e.singular_display_name=e.singular_display_name.toLocaleLowerCase(),e.item_display_property=encodeURIComponent(e.item_display_property),!e.name||!e.plural_display_name||!e.singular_display_name||!e.item_display_property){alert("Collection schema must have an API identifier, plural display name, singular display name and an item display property set");return}if(e.name==="create"){alert("Collection schema API identifier cannot be 'create'");return}if(!l[e.item_display_property]){alert("Item display property API identifier must be set to an existing property");return}const t={...e,properties:l};if(n.schema)await y.updateCollectionSchema(t.name,t),location.reload();else{const r=await y.addCollectionSchema(t);await u.push(u.resolve({name:"collection-schemas"}).href+"/"+r.created_schema_name),location.reload()}},C=async()=>{!n.schema||!confirm("Are you sure you want to delete this collection schema? It will also remove all database entries associated with it!")||(await y.deleteCollectionSchema(n.schema.name),await u.push({name:"collection-schemas"}),location.reload())};return(l,t)=>{var r;return p(),h(x,{mode:l.schema?"update":"create",properties:(r=l.schema)==null?void 0:r.properties,"on-submit":b},{attributes:_(()=>[a("label",null,[l.schema?(p(),f("p",L," The unique API identifier for this collection. ")):(p(),f("p",U,[s(" Specify a unique API identifier for this collection. Cannot be changed once set. Case-insensitive. Will be "),V,s(". ")])),m(a("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.name=o),type:"text",placeholder:"API identifier...",disabled:!!l.schema},null,8,B),[[d,e.name]])]),a("label",null,[T,m(a("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.plural_display_name=o),type:"text",placeholder:"Plural display name..."},null,512),[[d,e.plural_display_name]])]),a("label",null,[R,m(a("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>e.singular_display_name=o),type:"text",placeholder:"Singular display name..."},null,512),[[d,e.singular_display_name]])]),a("label",null,[D,m(a("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.item_display_property=o),type:"text",placeholder:"Item display property..."},null,512),[[d,e.item_display_property]])])]),actions:_(()=>[l.schema?(p(),h(k,{key:0,type:"button",mode:"ghost","aria-label":"Delete",onClickPassive:C},{default:_(()=>[s(" Delete ")]),_:1})):v("",!0)]),_:1},8,["mode","properties"])}}}),W=A(F,[["__scopeId","data-v-1d483f04"]]);export{W as C};
